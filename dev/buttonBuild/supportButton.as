package buttonBuild{	import flash.events.Event;	import flash.events.EventDispatcher;	import flash.display.Sprite;	import flash.display.Shape;	import caurina.transitions.Tweener;	import caurina.transitions.properties.FilterShortcuts;	import caurina.transitions.properties.ColorShortcuts;	import flash.events.MouseEvent;	import flashx.textLayout.compose.StandardFlowComposer;	import flashx.textLayout.container.ContainerController;	import flashx.textLayout.elements.ParagraphElement;	import flashx.textLayout.elements.SpanElement;	import flashx.textLayout.elements.TextFlow;	import flashx.textLayout.formats.*;	import flashx.textLayout.conversion.TextConverter;	import flashx.textLayout.edit.SelectionManager;	public class supportButton extends Sprite {		public static var UPDATE:String = 'ButtonClicked';		private var buttonTitle:String = "";		public var buttonNum:int;				private var myShape:Shape;		private var myFrame:Shape;		private var textSpace:Sprite;		private var button:Sprite;		private var bg:Sprite;		private var bgFrame:Sprite;		public var labeltxt:String = "helpful information";		private var _textFlow:TextFlow;		private var cont:ContainerController;		private var widthNum:int=100		private var heightNum:int=17		public function supportButton(s:String,i:int) {			// constructor code			labeltxt = s;			buttonNum = i;						FilterShortcuts.init();			ColorShortcuts.init();			addEventListener(Event.ADDED_TO_STAGE,menuButtonBuild);		}		private function menuButtonBuild(event:Event):void {			removeEventListener(Event.ADDED_TO_STAGE,menuButtonBuild);			button = new Sprite() ;			addChild(button);			button.name="Button"			bg=new Sprite ();			button.addChild(bg);			bg.name="bg"			myShape = new Shape();			myShape.graphics.beginFill(0x7caabf,1);			//myShape.graphics.lineStyle(1, 0x000000, .75, true);			myShape.graphics.lineTo(widthNum, 0);			myShape.graphics.lineTo(widthNum,heightNum-5);			myShape.graphics.curveTo(widthNum,heightNum,widthNum-5,heightNum);			myShape.graphics.lineTo(5, heightNum);			myShape.graphics.curveTo(0,heightNum,0,(heightNum-5));			myShape.graphics.lineTo(0,0);			myShape.graphics.endFill();			bg.addChild(myShape);			myShape.name="myShape"			bgFrame=new Sprite ();			button.addChild(bgFrame);			bgFrame.name="bgFrame"			myFrame = new Shape() ;			myFrame.graphics.lineStyle(1, 0xb9bbb9, .75, true);			myFrame.graphics.lineTo(widthNum, 0);						myFrame.graphics.lineTo(widthNum,heightNum-5);			myFrame.graphics.curveTo(widthNum,heightNum,widthNum-5,heightNum);			myFrame.graphics.lineTo(5, heightNum);			myFrame.graphics.curveTo(0,heightNum,0,(heightNum-5));			myFrame.graphics.lineTo(0,0);			bgFrame.addChild(myFrame);			myFrame.name="myFrame"			//bgFrame.alpha = 0;			Tweener.addTween(myShape,{_Glow_alpha:.75,_Glow_blurX:10,_Glow_blurY:10,_Glow_color:0xffffff,_Glow_inner:true});			textSpace = new Sprite ();			button.addChild(textSpace);			textSpace.name="textSpace"			beginFlow(labeltxt);		}		private function beginFlow(s:String):void {			_textFlow = new TextFlow();			_textFlow.flowComposer = new StandardFlowComposer();			_textFlow = TextConverter.importToFlow(s,TextConverter.PLAIN_TEXT_FORMAT);			_textFlow.textAlign = TextAlign.CENTER;			_textFlow.verticalAlign = VerticalAlign.MIDDLE;			//_textFlow.fontFamily = "Optima";			_textFlow.fontFamily = "Segoe UI";			_textFlow.fontLookup = "embeddedCFF";			_textFlow.fontSize = 13;			cont = new ContainerController(textSpace,(myShape.width),(myShape.height));			_textFlow.flowComposer.addController(cont);			_textFlow.interactionManager = new SelectionManager();			_textFlow.flowComposer.updateAllControllers();			buttonFunction();		}		private function buttonFunction():void {			bg.alpha = 1;			button.buttonMode = true;			button.mouseChildren = false;			button.useHandCursor = true;			trace(button.parent.name, 1)			button.addEventListener(MouseEvent.MOUSE_OVER,buttonOver);			trace(button.parent.name, 2)			button.addEventListener(MouseEvent.MOUSE_OUT, buttonOut);			trace(button.parent.name, 3)			button.addEventListener(MouseEvent.MOUSE_DOWN, buttonDown);			button.cacheAsBitmap=true			//button.addEventListener(Event.REMOVED_FROM_STAGE, removedFromStage);		}		private function buttonOver(event:MouseEvent):void {			//trace ("buttonOver") 			Tweener.addTween(bgFrame,{time:.2,_color:0xffffff,transition:"easeOutQuad"});			Tweener.addTween(bg,{time:.2,_Glow_alpha:.75,_Glow_blurX:15,_Glow_blurY:15,_Glow_color:0xffffff,_Glow_inner:false,transition:"easeOutQuad"});		}		private function buttonOut(event:MouseEvent):void {			//trace ("buttonOut") 			Tweener.addTween(bg,{time:.2,_Glow_alpha:0,_Glow_blurX:0,_Glow_blurY:0,_Glow_color:0xffffff,_Glow_inner:false,transition:"easeOutQuad"});			Tweener.addTween(bgFrame,{time:.2,_color:0xb9bbb9,transition:"easeOutQuad"});		}		private function buttonDown(event:MouseEvent):void {			dispatchEvent(new Event(supportButton.UPDATE));		}		private function removedFromStage(event:Event) {			button.removeEventListener(Event.REMOVED_FROM_STAGE, removedFromStage);						button.removeEventListener(MouseEvent.MOUSE_OVER,buttonOver);			button.removeEventListener(MouseEvent.MOUSE_OUT, buttonOut);			button.removeEventListener(MouseEvent.MOUSE_DOWN, buttonDown);			button = null;		}	}}